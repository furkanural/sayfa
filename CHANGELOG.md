# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

## [0.3.2] - 2026-02-28

### Fixed

- **Mobile code block overflow**: Code blocks no longer cause horizontal page scroll on mobile — `max-width: 100%` is now applied to `pre` elements inside `.prose-content`, and `max-w-full` added to the JS-enhanced code copy wrapper

## [0.3.1] - 2026-02-27

### Changed

- **Elixir requirement**: Updated minimum Elixir version from `~> 1.18` to `~> 1.19`
- **Dependency updates**: Updated core dependencies to latest stable versions — mdex `~> 0.11`, yaml_elixir `~> 2.12`, xml_builder `~> 2.4`, plug_cowboy `~> 2.8`, file_system `~> 1.1`, ex_doc `~> 0.40`

### Fixed

- **`mix sayfa.new` version constraint**: New sites were scaffolded with `{:sayfa, "~> 0.1"}` — now correctly uses `"~> 0.3"`
- **ExDoc module groups**: Added 8 missing blocks to the docs module groups — `CategoryCloud`, `RecentContent`, `CopyLink`, `Breadcrumb`, `LanguageSwitcher`, `RelatedPosts`, `RelatedContent`, `Analytics`

## [0.3.0] - 2026-02-27

### Added

- **Logo support in header**: Set `logo: "/images/logo.svg"` in site config to replace the plain text title with an image in the header block. Optionally set `logo_dark:` for a separate dark-mode variant — the light logo gains `dark:hidden` and the dark logo `hidden dark:block` Tailwind classes automatically. Falls back to text title when neither key is present.
- **Print styles**: Built-in CSS print styles for clean printed pages
- **View transitions**: Smooth page transitions using the View Transitions API
- **Highlight theme**: Configurable syntax highlighting theme support
- **`related_content` block**: Show related content across different content types
- **`analytics` block**: Built-in analytics integration block
- **Responsive images hook**: Automatic `srcset` generation for responsive images
- **`mix sayfa.gen.images` task**: Image optimization pipeline scaffold (vips/ImageMagick)
- **Content validation**: Validates required front matter fields during build and reports errors
- **Prev/next navigation**: Automatic previous/next content links generated by the builder
- **`mix sayfa.gen.lang` task**: Add language support to an existing site
- **Multilingual content generation**: `mix sayfa.new` now generates content files for non-default languages

### Changed

- **Output directory renamed**: Default build output directory changed from `output` to `dist`
- **Nixpacks**: Replaced Docker with Nixpacks configuration in the new site template

### Fixed

- **Image optimization script**: Removed unsupported `--format` flag from `vips thumbnail` calls (format is inferred from file extension)
- **Image optimization script**: Prevent duplicate processing — skip `*_1200.*` files and already-optimized sources on reruns

## [0.2.0] - 2026-02-23

### Added

- **Internationalization**: Translation system with 14 built-in languages (English, Turkish, German, Spanish, French, Italian, Portuguese, Japanese, Korean, Chinese, Arabic, Russian, Dutch, Polish)
- **New Blocks**: Language switcher, category cloud, related posts, breadcrumb, copy link
- **Image Helper**: Responsive image module with srcset, lazy loading, and WebP support
- **Excerpt Extraction**: Automatic content summaries for list pages and feeds
- **Reading Progress**: Visual progress bar and ToC scroll-spy for long articles
- **Mix Tasks**: `mix sayfa.gen.content` and `mix sayfa.gen.layout` generators
- **SEO Enhancements**: JSON-LD structured data, hreflang tags for multilingual content
- **Multilingual Archives**: Tag and category archive pages with language support
- **Self-Hosted Fonts**: Eliminate Google Fonts dependency for better privacy
- **Deployment Support**: Nixpacks config and GitHub Pages workflow
- **Component Classes**: Reusable Tailwind utilities for consistent styling
- **Expanded Social Icons**: Support for 24 social media platforms

### Fixed

- Language switcher mobile functionality with unique IDs for desktop/mobile variants
- Localized home URL detection in header active state
- Translated reading time labels across all languages
- TailwindCSS typography plugin for proper prose styling
- URL generation with correct trailing slash handling

### Changed

- Redesigned default theme layouts with Tailwind utilities
- Simplified block implementations to use component classes
- DevServer dependencies now required (no longer optional)

## [0.1.1] - 2026-02-11

### Fixed

- Guard DevServer modules behind compile-time checks so the package works without optional dependencies installed
- Ensure application startup in Mix tasks (`sayfa.build`, `sayfa.serve`)

## [0.1.0] - 2025-02-11

Initial release of Sayfa — a static site generator built in Elixir.

### Added

#### Core
- Markdown parsing via MDEx (Rust NIF) with syntax highlighting
- YAML front matter extraction with known fields + `meta` catch-all map
- Two-struct content pipeline (`Content.Raw` -> `Content`)
- Slug generation from filenames with date prefix stripping
- Collections API: filter by type/tag/category, sort by date, group, recent

#### Build Pipeline
- Full build orchestration (`Sayfa.Builder`)
- Three-layer template composition (content body -> layout -> base)
- EEx template rendering with `@block` helper injection
- Configuration system with defaults, app env, and runtime overrides
- Static asset copying
- Draft filtering

#### Content Types
- 5 built-in content types: Post, Note, Project, Talk, Page
- Content type behaviour for custom types (`Sayfa.Behaviours.ContentType`)
- Layout selection: front matter -> content type default -> fallback
- Category and tag archive page generation
- Pagination with configurable posts per page

#### Feeds & SEO
- Atom feed generation
- Sitemap XML generation
- SEO meta tags (Open Graph, description)
- Reading time calculation
- Table of contents extraction from headings

#### Blocks
- Block behaviour and registry system (`Sayfa.Behaviours.Block`)
- `@block.(:name, opts)` helper available in all templates
- 9 built-in blocks: hero, header, footer, social_links, toc, recent_posts, tag_cloud, reading_time, code_copy

#### Extensibility
- Hook behaviour with 4 pipeline stages: before_parse, after_parse, before_render, after_render
- Theme system with inheritance (custom theme -> parent -> default)
- Multilingual support (directory-based i18n)

#### Developer Experience
- `mix sayfa.new` — project generator with sample content
- `mix sayfa.build` — build with `--source`, `--output`, `--drafts`, `--verbose` flags
- `mix sayfa.serve` — dev server with file watching and hot reload
- Build caching for incremental rebuilds
- Verbose logging with per-stage timing

[0.3.2]: https://github.com/furkanural/sayfa/compare/v0.3.1...v0.3.2
[0.3.1]: https://github.com/furkanural/sayfa/compare/v0.3.0...v0.3.1
[0.3.0]: https://github.com/furkanural/sayfa/compare/v0.2.0...v0.3.0
[0.2.0]: https://github.com/furkanural/sayfa/compare/v0.1.1...v0.2.0
[0.1.1]: https://github.com/furkanural/sayfa/compare/v0.1.0...v0.1.1
[0.1.0]: https://github.com/furkanural/sayfa/releases/tag/v0.1.0
