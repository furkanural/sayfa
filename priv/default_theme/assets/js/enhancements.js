/* Reading progress bar & ToC scroll-spy */
(function(){var a=document.querySelector("article"),p=a&&a.querySelector(".prose");if(a&&p){var b=document.createElement("div");b.id="reading-progress";document.body.appendChild(b);window.addEventListener("scroll",function(){var r=a.getBoundingClientRect(),t=a.offsetHeight-window.innerHeight;if(t>0)b.style.width=Math.min(Math.max(-r.top/t,0),1)*100+"%"},{passive:true})}var tl=document.querySelectorAll('aside nav ul li a[href^="#"]');if(tl.length>0){var hi=[];tl.forEach(function(a){hi.push(a.getAttribute("href").slice(1))});var h=hi.map(function(id){return document.getElementById(id)}).filter(Boolean);if(h.length>0){var o=new IntersectionObserver(function(entries){entries.forEach(function(e){var l=document.querySelector('aside nav ul li a[href="#'+e.target.id+'"]');if(l&&e.isIntersecting){tl.forEach(function(a){a.classList.remove("toc-active")});l.classList.add("toc-active")}})},{rootMargin:"-80px 0px -70% 0px",threshold:0});h.forEach(function(el){o.observe(el)})}}})();
